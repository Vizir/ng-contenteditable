!function(){"use strict";angular.module("content-editable",[]).directive("contenteditable",["$timeout",function(u){return{restrict:"A",require:["^?ngModel","^?form"],link:function(e,r,t,n){var i=n[0],l=function(){if(void 0===t.ngModel)return null;var e=t.ngModel.split(".");return e[e.length-1]}();if(null===i)return null;var a={};angular.forEach(["onlyText","convertNewLines","noLf","onlyNum"],function(e){a[e]=t[e]&&"false"!==t[e]}),u(function(){return r.html(i.$modelValue)});var o=function(){var e,n;a.onlyText&&a.noLf||a.onlyNum?e=r.text():(e=r.html())&&(e=function(e){if(e=e.replace(/&nbsp;/g,"Â "),a.convertNewLines||a.noLf){var n="\r\n",r=/\r\n$/;a.noLf&&(n=" ",r=/ $/),e=(e=(e=(e=(e=(e=e.replace(/<br(\s*)\/*>/gi,n)).replace(/<[div>]+>/gi,n)).replace(/<\/[div>]+>/gm,"")).replace(/<[p>]+>/gi,n)).replace(/<\/[p>]+>/gm,"")).replace(r,"")}a.onlyText&&(e=e.replace(/<\S[^><]*>/g,""));return e}(e)),i.$setViewValue(e),(n=e.length)>t.ngMaxlength||n<t.ngMinlength?(i.$setValidity(l,!1),r.addClass("-error")):r.hasClass("-error")&&(i.$setValidity(l,!0),r.removeClass("-error"))};i.$render=function(){r.html(i.$viewValue||"")},r.bind("blur keyup change",function(){e.$apply(o)}),r.bind("keydown",function(e){var n=[8,37,38,39,40,46];if(a.onlyNum&&-1===n.indexOf(e.which)&&188!==e.which&&190!==e.which&&!(48<=e.which&&e.which<=57||96<=e.which&&e.which<=105))return e.preventDefault(),!1;if(a.noLf){if(13===e.which)return e.preventDefault(),!1;if(t.ngMaxlength&&r.text().length>=t.ngMaxlength&&-1===n.indexOf(e.which))return e.preventDefault(),!1}})}}}])}();