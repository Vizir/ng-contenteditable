!function(){"use strict";angular.module("content-editable",[]).directive("contenteditable",["$timeout",function(e){return{restrict:"A",require:["^?ngModel","^?form"],link:function(n,r,t,i){function l(e){if(e=e.replace(/&nbsp;/g,"Â "),f.convertNewLines||f.noLf){if(f.noLf)var n=" ",r=/ $/;else var n="\r\n",r=/\r\n$/;e=e.replace(/<br(\s*)\/*>/gi,n),e=e.replace(/<[div>]+>/gi,n),e=e.replace(/<\/[div>]+>/gm,""),e=e.replace(r,"")}return f.onlyText&&(e=e.replace(/<\S[^><]*>/g,"")),e}var o,u,a,c=function(){if(void 0===t.ngModel)return null;var e=t.ngModel.split(".");return e[e.length-1]}();if(null===(o=i[0]))return null;i[1];var f={};angular.forEach(["onlyText","convertNewLines","noLf","onlyNum"],function(e){var n=t[e];f[e]=n&&"false"!==n}),e(function(){return r.html(o.$modelValue)}),u=function(){var e;f.onlyText&&f.noLf||f.onlyNum?e=r.text():(e=r.html())&&(e=l(e)),o.$setViewValue(e),a(e)},a=function(e){var n=e.length;return n>t.ngMaxlength||n<t.ngMinlength?(o.$setValidity(c,!1),r.addClass("-error")):r.hasClass("-error")?(o.$setValidity(c,!0),r.removeClass("-error")):void 0},o.$render=function(){r.html(o.$viewValue||"")},r.bind("blur keyup change",function(){n.$apply(u)}),r.bind("keydown",function(e){var n=[8,37,38,39,40,46];if(f.onlyNum&&-1===n.indexOf(e.which)&&188!==e.which&&190!==e.which&&!(e.which>=48&&e.which<=57||e.which>=96&&e.which<=105))return e.preventDefault(),!1;if(f.noLf){if(13===e.which)return e.preventDefault(),!1;if(t.ngMaxlength&&r.text().length>=t.ngMaxlength&&-1===n.indexOf(e.which))return e.preventDefault(),!1}})}}}])}();